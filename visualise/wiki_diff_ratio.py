import matplotlib.pyplot as plt
import json
import numpy as np
import matplotlib.ticker as ticker

monthly_diffs = {'2017-02': 0.01116792953736281, '2017-03': 0.01834236197654902, '2017-04': 0.02574304017079133, '2017-05': 0.03496746749271252, '2017-06': 0.041387342586072594, '2017-07': 0.046878354661619895, '2017-08': 0.05455057883593177, '2017-09': 0.06289097497392492, '2017-10': 0.07010818532431914, '2017-11': 0.07661655089425637, '2017-12': 0.08917030266375628, '2018-01': 0.09563576470399006, '2018-02': 0.09848359035700614, '2018-03': 0.10524214585024406, '2018-04': 0.11351711685274801, '2018-05': 0.12082234269079567, '2018-06': 0.12725273504445206, '2018-07': 0.13391217103865546, '2018-08': 0.13992957804893252, '2018-09': 0.1467543261161517, '2018-10': 0.1516270840152477, '2018-11': 0.15971477799389064, '2018-12': 0.16392788269177516, '2019-01': 0.16877427806512957, '2019-02': 0.17272036404500812, '2019-03': 0.1734932242894733, '2019-04': 0.17643397228150343, '2019-05': 0.18204949683295235, '2019-06': 0.18567249145794149, '2019-07': 0.18860373353760934, '2019-08': 0.192941409599943, '2019-09': 0.19646115272767573, '2019-10': 0.19947695379498326, '2019-11': 0.2042638730400354, '2019-12': 0.20535551225073473, '2020-01': 0.21022376468560444, '2020-02': 0.2163519693488857, '2020-03': 0.21776973684670542, '2020-04': 0.22353608305167946, '2020-05': 0.22831721488527923, '2020-06': 0.2318074801066413, '2020-07': 0.23823993718669517, '2020-08': 0.24372521733601665, '2020-09': 0.24666164927737053, '2020-10': 0.2495010704975462, '2020-11': 0.25411969603513096, '2020-12': 0.2621696338476233, '2021-01': 0.26893761687770185, '2021-02': 0.2737068346035143, '2021-03': 0.2798274781454656, '2021-04': 0.2853918394203085, '2021-05': 0.2930184706701309, '2021-06': 0.2984052276496851, '2021-07': 0.304206707259906, '2021-08': 0.3061869007586494, '2021-09': 0.3095803030710187, '2021-10': 0.31184193819305417, '2021-11': 0.31569386698315405, '2021-12': 0.3159712310278265, '2022-01': 0.31887096932240977, '2022-02': 0.321770178310484, '2022-03': 0.3253934021689546, '2022-04': 0.327022089258801, '2022-05': 0.3295241350121946, '2022-06': 0.33243314038148963, '2022-07': 0.33418594586120914, '2022-08': 0.3372125906977422, '2022-09': 0.3422111189008709, '2022-10': 0.3454443349018839, '2022-11': 0.3482930481380629, '2022-12': 0.3519015515709205, '2023-01': 0.35437893811057447, '2023-02': 0.3569234666313323, '2023-03': 0.3595299016739051, '2023-04': 0.36260677971307864, '2023-05': 0.36633521291601473, '2023-06': 0.3677992689595484, '2023-07': 0.37103792495341176, '2023-08': 0.37351423621432, '2023-09': 0.37576021807352356, '2023-10': 0.37949992109413283, '2023-11': 0.3827559713344019}

plt.figure(figsize=(10, 5), dpi=200)

months = list(monthly_diffs.keys())
plt.xticks(np.arange(0, len(months), 6), rotation=45)
plt.gca().yaxis.set_major_locator(ticker.MultipleLocator(0.1))

plt.plot(monthly_diffs.keys(), monthly_diffs.values(), color='blue', linewidth=1.5, linestyle='solid', label='Wikitext', marker='o', markersize=3)

plt.ylabel('Diff ratio (compare to 2017-01)')

plt.legend(fontsize=10)
plt.tight_layout()

plt.grid()

plt.savefig('results/wiki_diff_ratio.png')